## 循环引用分为两种情况：

1. 对象的某个属性引用了对象本身
2. 两个对象互相引用对方

```js
function isCyclic(obj) {
  let objSets = new Set();
  let flag = false;

  function detect(obj) {
    if (obj && typeof obj !== "object") return;
    if (objSets.has(obj)) return (flag = true);
    objSets.add(obj);

    for (let key in obj) {
      if (obj.hasOwnProperty(key)) {
        detect(obj[key]);
      }
    }

    objSets.delete(obj);
  }

  detect(obj);
  return flag;
}

const foo = {
  foo: "Foo",
  bar: {
    bar: "Bar",
  },
};
foo.bar.baz = foo; // 循环引用！

const obj1 = {
  a: 1,
};
const obj2 = {
  a: 2,
};
obj1.b = obj2;
obj2.b = obj1;

const obj3 = {
  a: 3,
};
const obj4 = {
  a: obj3,
  b: obj3,
};

const a = 5;
console.log(isCyclic(foo)); // true
console.log(isCyclic(obj1)); // true
console.log(isCyclic(obj2)); // true
console.log(isCyclic(obj3)); // false
console.log(isCyclic(obj4)); // false
console.log(isCyclic(a)); // false
```
