## 本地数据存储 localStorage、sessionStorage、cookie

### localStorage

1. 浏览器本地永久存储，除非手动删除，否则一直存在
2. 受同源策略限制，只有协议、域名和端口相同的时才能访问到同一个 localStorage
3. 存储大小限制为 5M，这个受浏览器影响，不同浏览器可能不一样
4. 以键值对方式存储，内容只能存储字符串，如果要存储复杂数据，需要通过 JSON.stringify 序列化成 JSON 格式存储
5. 对应操作的 API 有 setItem, getItem, removeItem, clear 等等
6. 如果需要跨窗口进行通信，可以通过监听`storage`, 当存储的数据发生变化时，更新其他窗口的存储数据

### sessionStorage

1. 与 localStorage 类似， 区别是 sessionStorage 是会话级存储，在窗口关闭或是浏览器关闭后，sessionStorage 就会被清空，其他与 localStorage 基本一致
2. 因为每个窗口的 sessionStorage 是独立的，所以不支持跨窗口通信

### cookie

1. cookie 是存储在客户端的数据片段，每次发起请求都会被发送到服务端。可以设置存储过期时间，如果不设置则是会话级存储，窗口关闭或浏览器关闭后，cookie 就会被清空
2. 同样受到同源策略限制，但是 cookie 还可以设置 domain 和 path 来限制哪些子域名或路径可以访问
3. 存储大小约 4kb
4. 可以通过 document.cookie 设置 cookie，如果需要删除 cookie 则将 expires 设置为过去的时间就行了
5. 为了提高 cookie 安全性，可以设置 secure 属性限制只能在 https 协议下传输，防止中间人攻击；还可以设置 httpOnly 属性，限制 javaScript 脚本无法访问，只能通过 http(s)请求发送到服务端，防止 XSS 攻击
